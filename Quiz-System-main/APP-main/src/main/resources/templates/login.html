<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login - AI Quiz App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: #0a0520;
            color: #E5E7EB;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        .aurora-background {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(ellipse at 20% 30%, rgba(138, 43, 226, 0.8) 0%, rgba(138, 43, 226, 0) 60%),
                        radial-gradient(ellipse at 80% 50%, rgba(0, 191, 255, 0.7) 0%, rgba(0, 191, 255, 0) 70%),
                        linear-gradient(135deg, #000000 0%, #0a0520 100%);
            animation: aurora-drift 25s infinite alternate ease-in-out;
            z-index: 0;
        }
        .container {
            position: relative; z-index: 1; text-align: center;
            background: rgba(31, 41, 55, 0.8); padding: 40px; border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid #374151; width: 90%; max-width: 400px;
        }
        h1 { margin-bottom: 20px; font-size: 2.2rem; color: #F9FAFB; }
        .form-group { margin-bottom: 1.5rem; text-align: left; }
        label { display: block; margin-bottom: 0.5rem; color: #9CA3AF; }
        .glow-container { position: relative; display: flex; align-items: center; justify-content: center; }
        .white, .border, .darkBorderBg, .glow { position: absolute; width: 100%; height: 100%; overflow: hidden; z-index: -1; border-radius: 12px; }
        .white::before, .border::before { content: ""; z-index: -2; position: absolute; width: 600px; height: 600px; transition: all 2s; top: 50%; left: 50%; }
        .border::before { transform: translate(-50%, -50%) rotate(70deg); background-image: conic-gradient(#010201, #3b82f6 5%, #010201 14%, #010201 50%, #ec4899 60%, #010201 64%); }
        .glow-container:hover > .border::before, .glow-container:focus-within > .border::before { transform: translate(-50%, -50%) rotate(-110deg); }
        .input-group { display: flex; align-items: center; padding: 0 12px; border-radius: 8px; background-color: #010201; z-index: 1; width: 100%; }
        input { padding: 12px 0; width: 100%; box-sizing: border-box; border: none; background-color: transparent; color: #E5E7EB; font-size: 1rem; outline: none; padding-left: 10px; }
        .btn { display: flex; justify-content: center; align-items: center; padding: 12px 25px; border: 1px solid #374151; background-color: #1F2937; color: #E5E7EB; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 20px; }
        .btn:hover { background: #6D28D9; border-color: #8B5CF6; }
        .toggle-link { color: #8B5CF6; cursor: pointer; text-decoration: underline; margin-top: 1rem; display: inline-block; }
        .alert { padding: 1rem; margin-bottom: 1rem; border-radius: 8px; }
        .alert-danger { background-color: rgba(239, 68, 68, 0.2); color: #F87171; }
        .alert-success { background-color: rgba(16, 185, 129, 0.2); color: #34D399; }
    </style>
</head>
<body>
<div class="aurora-background"></div>
<div class="container">
    <div id="login-form">
        <h1>Welcome Back ðŸš€</h1>
        <div th:if="${param.error}" class="alert alert-danger">Invalid username or password.</div>
        <div th:if="${param.logout}" class="alert alert-success">You have been logged out.</div>
        <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
        <form th:action="@{/login}" method="post">
            <div class="form-group">
                <label for="username">Username:</label>
                <div class="glow-container">
                    <div class="border"></div>
                    <div class="input-group">
                        <input id="username" type="text" name="username" required>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <div class="glow-container">
                    <div class="border"></div>
                    <div class="input-group">
                        <input id="password" type="password" name="password" required>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn">Login</button>
        </form>
        <p>Don't have an account? <a class="toggle-link" onclick="toggleForms()">Register here</a></p>
    </div>

    <div id="register-form" style="display:none;">
        <h1>Create Account âœ¨</h1>
        <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
        <form th:action="@{/register}" method="post">
            <div class="form-group">
                <label for="reg-username">Username:</label>
                <div class="glow-container">
                    <div class="border"></div>
                    <div class="input-group">
                        <input id="reg-username" type="text" name="username" required>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="reg-password">Password:</label>
                <div class="glow-container">
                    <div class="border"></div>
                    <div class="input-group">
                        <input id="reg-password" type="password" name="password" required>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn">Register</button>
        </form>
        <p>Already have an account? <a class="toggle-link" onclick="toggleForms()">Login here</a></p>
    </div>
</div>

<script>
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const urlParams = new URLSearchParams(window.location.search);

    if (urlParams.has('show') && urlParams.get('show') === 'register') {
        loginForm.style.display = 'none';
        registerForm.style.display = 'block';
    }

    function toggleForms() {
        if (loginForm.style.display === 'none') {
            loginForm.style.display = 'block';
            registerForm.style.display = 'none';
        } else {
            loginForm.style.display = 'none';
            registerForm.style.display = 'block';
        }
    }
</script>

</body>
</html>