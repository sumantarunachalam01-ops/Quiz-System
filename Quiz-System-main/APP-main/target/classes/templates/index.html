<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>AI Quiz App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: #0a0520;
            color: #E5E7EB;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }
        .aurora-background {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(ellipse at 20% 30%, rgba(138, 43, 226, 0.8) 0%, rgba(138, 43, 226, 0) 60%),
                        radial-gradient(ellipse at 80% 50%, rgba(0, 191, 255, 0.7) 0%, rgba(0, 191, 255, 0) 70%),
                        linear-gradient(135deg, #000000 0%, #0a0520 100%);
            animation: aurora-drift 25s infinite alternate ease-in-out;
            z-index: 0;
        }
        .container {
            position: relative; z-index: 1; text-align: center;
            background: rgba(31, 41, 55, 0.8); padding: 40px; border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid #374151; width: 90%; max-width: 500px;
        }
        /* âœ… ADDED: Styles for the header bar */
        .header-bar {
            position: absolute;
            top: 20px;
            right: 30px;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            z-index: 2;
        }
        .header-link {
            color: #E5E7EB;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.2s ease;
        }
        .header-link:hover { color: #8B5CF6; }
        .logout-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        h1 { margin-bottom: 20px; font-size: 2.2rem; color: #F9FAFB; }
        .form-group { margin-bottom: 1.5rem; text-align: left; }
        label { display: block; margin-bottom: 0.5rem; color: #9CA3AF; }
        .glow-container { position: relative; display: flex; align-items: center; justify-content: center; }
        .border::before { content: ""; z-index: -2; position: absolute; width: 600px; height: 600px; transition: all 2s; top: 50%; left: 50%; }
        .border { border-radius: 11px; filter: blur(0.5px); position: absolute; width: 100%; height: 100%; overflow: hidden; z-index: -1; }
        .border::before { transform: translate(-50%, -50%) rotate(70deg); background-image: conic-gradient(#010201, #3b82f6 5%, #010201 14%, #010201 50%, #ec4899 60%, #010201 64%); }
        .glow-container:hover > .border::before, .glow-container:focus-within > .border::before { transform: translate(-50%, -50%) rotate(-110deg); }
        .input-group { display: flex; align-items: center; padding: 0 12px; border-radius: 8px; background-color: #010201; z-index: 1; width: 100%; }
        input, select { padding: 12px 0; width: 100%; border: none; background-color: transparent; color: #E5E7EB; font-size: 1rem; outline: none; }
        .composite-input { padding-left: 10px; flex-grow: 1; min-width: 0; }
        .file-upload-button { padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; flex-shrink: 0; }
        #file-name-display { font-size: 0.8rem; margin-left: 8px; color: #9CA3AF; }
        select { -webkit-appearance: none; appearance: none; background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%239CA3AF%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22/%3E%3C/svg%3E'); background-repeat: no-repeat; background-position: right 1rem center; background-size: .65em auto; }
        .btn { display: flex; justify-content: center; align-items: center; padding: 12px 25px; border: 1px solid #374151; background-color: #1F2937; color: #E5E7EB; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 20px; }
    </style>
</head>
<body>
<div class="aurora-background"></div>

<!-- âœ… ADDED: Header with conditional History link and Logout button -->
<div sec:authorize="isAuthenticated()" class="header-bar">
    <a th:href="@{/history}" class="header-link">ðŸ“œ History</a>
    <form th:action="@{/logout}" method="post">
        <button type="submit" class="logout-button header-link">Logout</button>
    </form>
</div>

<div class="container">
    <h1>AI Quiz Generator ðŸŽ“</h1>
    <p>Enter a topic, or upload a document.</p>
    <form id="quiz-form" action="/generate-quiz" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="topic">Topic or File:</label>
            <div class="glow-container">
                <div class="border"></div>
                <div class="input-group">
                    <input id="topic" type="text" name="topic" placeholder="Type a topic..." class="composite-input">
                    <label for="file" class="file-upload-button"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/><path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"/></svg><span id="file-name-display"></span></label>
                    <input type="file" name="file" id="file" accept=".txt,.pdf,.docx" style="display: none;">
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="difficulty">Difficulty:</label>
            <div class="glow-container">
                <div class="border"></div>
                <div class="input-group">
                    <select id="difficulty" name="difficulty"><option value="easy">Easy</option><option value="medium">Medium</option></select>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="type">Question Type:</label>
            <div class="glow-container">
                <div class="border"></div>
                <div class="input-group">
                    <select id="type" name="type"><option value="Multiple Choice">Multiple Choice</option></select>
                </div>
            </div>
        </div>
        <button type="submit" class="btn"><span>Generate</span></button>
    </form>
</div>
<!-- Loader and script remain the same -->
</body>
</html>

